---
// src/pages/projects.astro
import BaseLayout from '../layouts/BaseLayout.astro';

// src/pages/projects.astro

// Define the type for a GitHub repo
interface Repo {
  name: string;
  description: string | null;
  html_url: string;
  language: string | null;
  stargazers_count: number;
  fork: boolean;
}

// Fetch your public repos
const response = await fetch('https://api.github.com/users/YoRzHe-HotaaRu/repos?sort=updated&per_page=12');
const repos = await response.json();

// Filter out forks
const filteredRepos = repos.filter((repo: any) => !repo.fork) as Repo[];
---

<BaseLayout title="Projects">
  <h1>My GitHub Projects</h1>
  <p>Here are some of the repositories I've built and contributed to.</p>

  <div class="projects-grid">
    {filteredRepos.map((repo: Repo) => (
      <a href={repo.html_url} target="_blank" class="project-card" rel="noopener">
        <h3>{repo.name}</h3>
        <p class="project-desc">
          {repo.description || 'No description provided.'}
        </p>
        <div class="project-footer">
          {repo.language && <span class="lang">{repo.language}</span>}
          <span class="stars">‚≠ê {repo.stargazers_count}</span>
        </div>
      </a>
    ))}
  </div>
</BaseLayout>